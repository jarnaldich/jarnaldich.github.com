<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <title>Joan Arnaldich - Setting up Spacemacs for Python</title>

        <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css"
              rel="stylesheet">

        <link href='http://fonts.googleapis.com/css?family=Abel' rel='stylesheet' type='text/css'>
       <link rel="stylesheet" type="text/css" href="/css/syntax.css" />
        <link rel="stylesheet" type="text/css" href="/css/custom.css" />
    </head>
    <body>
<script type="text/javascript" async
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <div class="container">
            <div class="row">
                <div class="col-md-10 col-md-offset-1">
                    <div class="page-header">
                        <h1>Joan
                        Arnaldich<sup class="sup-title">(.me)</sup></h1>

                        <div style="margin-top:20px;">
                            <div class="row">
                                <div class="col-md-2"><a href="/"><i class="fa fa-home fa-lg fa-fw"></i> Home</a></div>

                                <div class="col-md-2"><a href="/posts.html"><i class="fa fa-pencil fa-lg fa-fw"></i> Posts</a></div>
                                <div class="col-md-2"><a href="/tags.html"><i class="fa fa-tag fa-lg fa-fw"></i> Tags</a></div>
                                <div class="col-md-2"><a href="/about.html"><i class="fa fa-male fa-lg fa-fw"></i> About</a></div>
                                <div class="col-xs-1"><a href="http://github.com/jarnaldich"><i class="fa fa-github fa-lg fa-fw"></i></a></div>
                                <div class="col-xs-1"><a href="https://twitter.com/jarnaldich"><i class="fa fa-twitter fa-lg fa-fw"></i></a></div>
                                <div class="col-xs-1"><a href="/rss.xml"><i class="fa fa-rss fa-lg fa-fw"></i></a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-10 col-md-offset-1">
                    <h1>Setting up Spacemacs for Python</h1>

<small>Posted on January  1, 2000 <a href="/drafts/spacemacs-python.html"><i class="fa fa-link fa-lg fa-fw"></i></a></small>

<h2 id="setting-up-spacemacs-for-python-development">Setting Up Spacemacs for Python Development</h2>
<p>For those of you who do not know yet, <a href="https://github.com/syl20bnr/spacemacs">Spacemacs</a> is an emacs configuration focused on ergonomics with EVIL mode (VI - like emulation) turned on by default.</p>
<p>Spacemacs comes with <a href="https://github.com/syl20bnr/spacemacs/blob/master/doc/LAYERS.org">configuration layers</a> to enhance its functionality for particular purposes. For example, there are layers for specific languages or frameworks. Of course, there is a python layer included in the installation, but I had to tune some vars to make it work for me. This blog posts explains the tweaking process.</p>
<h2 id="activate-the-python-layer">Activate the Python layer</h2>
<p>User configuration is placed in a <code>~/.spacemacs</code> file. You can also edit this file directly by pressing <code>SPC f e d</code> in spacemacs.</p>
<p>To activate the python layer, you just need to add a <code>python</code> entry into the <code>dotspacemacs-configuration-layers</code> inside the <code>dotspacemacs/layers</code> <code>defun</code>.</p>
<p>After doing so, the configuration can be reloaded with <code>SPC f e R</code>.</p>
<p>The configuration for the python layer is under the <code>~/.emacs.d/layers/+lang/python/</code> directory. Make sure you read the README.org file there, and it may also be instructive to check the <code>packages.el</code> if something does not work out of the box.</p>
<h2 id="tweak-projectile">Tweak projectile</h2>
<p>Minor configurations should be placed inside the <code>dotspacemacs/config</code> function in <code>.spacemacs</code>. Spacemacs comes with <a href="http://batsov.com/projectile/">Projectile</a>, an emacs mode for project-wide configurations.</p>
<h3 id="make-sure-you-have-a-setup.py-or-whatever">Make sure you have a <code>setup.py</code>… or whatever</h3>
<p>Projectile detects what kind of project you are working in from the existence of some “marker” file. You can check which projects does projectile recognize by inpecting the <code>projectile-project-types</code> hash, or by looking at the contents of the <code>projectile.el</code> file. If you do the latter, the relevant project types for python programming and its associated attributes look like:</p>
<pre class="lisp"><code>(projectile-register-project-type &#39;django &#39;(&quot;manage.py&quot;) &quot;python manage.py runserver&quot; &quot;python manage.py test&quot;)
(projectile-register-project-type &#39;python-pip &#39;(&quot;requirements.txt&quot;) &quot;python setup.by build&quot; &quot;python -m unittest discover&quot;)
(projectile-register-project-type &#39;python-pkg &#39;(&quot;setup.py&quot;) &quot;python setup.py build&quot; &quot;python -m unittest discover&quot;)
(projectile-register-project-type &#39;python-tox &#39;(&quot;tox.ini&quot;) nil &quot;tox&quot;)</code></pre>
<p>So you should try to make sure that Projectile and you agree on the kind of project you have at hand. In particular, if you are developing a vanilla python module, make sure you include the proper <code>setup.py</code> file. You can check if the configuration went ok with the command: <code>projectile-project-info</code></p>
<p>Also notice that the rest of arguments will be the defaults for building a project and making tests, in case you need to tweak something.</p>
<h3 id="toggle-between-test-and-implementation">Toggle between test and implementation</h3>
<p>One of the things projectile can do is switching between the test and implementation. You may need to include a function to accomodate whatever convention you use for test files and add it to the <code>dotspacemacs/config</code> defun. In my case, I use a <code>test_</code> prefix in my test files.</p>
<pre class="lisp"><code>  (setq projectile-test-prefix-function
        (lambda (x)
          (cond ((eq x &#39;python-pkg)
                 &quot;test_&quot;)
                (t (error &quot;Prefix not defined for this project type&quot;)))))</code></pre>
<p>After reloading, <code>SPC p a</code> should toggle between test and implementation. <code>C-c p P</code> will run all your project tests, after prompting for the apropiate command. In my case, something like:</p>
<pre><code>python -m unittest discover -p &quot;test_*.py&quot;</code></pre>
<h2 id="anaconda-mode">Anaconda mode</h2>
<h2 id="see-also">See also</h2>
<ul>
<li>Read more about spacemacs tweaking in general <a href="http://thume.ca/howto/2015/03/07/configuring-spacemacs-a-tutorial/">here</a></li>
<li><a href="https://touk.pl/blog/2015/10/14/getting-started-with-haskell-stack-and-spacemacs/">This page</a> will help Haskell / Stack users set up spacemacs.</li>
<li>For general info on Python programming in vanilla emacs, check the <a href="http://emacswiki.org/emacs/PythonProgrammingInEmacs">wiki</a>.</li>
</ul>

<div class="panel panel-default">
    <div class="panel-body">
        <div class="pull-left">
            Tags: 
        </div>
        <div class="social pull-right">
            <span class="twitter">
                <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jarnaldich.me/drafts/spacemacs-python.html" data-via="jarnaldich.me" data-dnt="true">Tweet</a>
            </span>

             <script src="https://apis.google.com/js/plusone.js" type="text/javascript"></script>
             <span>
                <g:plusone href="http://www.example.com/blog/2013/12/14/parallel-voronoi-in-haskell/"
  size="medium"></g:plusone>
             </span>
            
        </div>
    </div>
</div>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<div id="disqus_thread"></div>  
<script type"text/javascript">
      var disqus_shortname = 'jarnaldich';
      (function() {
          var dsq = document.createElement('script');
          dsq.type = 'text/javascript';
          dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    

                </div>
            </div>
        </div>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                  ga('create', 'UA-6838480-2', 'jarnaldich.me');
                    ga('send', 'pageview');

        </script>


    </body>
</html>
